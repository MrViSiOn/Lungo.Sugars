Lungo.Sugar.Growl=function(d,t){var q=[],e=null,c=null,l=d.Constants.BINDING,k={BODY:"body",GROWL:".growl",MODAL:".growl .window",MODAL_HREF:".growl .window a",WINDOW_CLOSABLE:".growl > .url .close",CONFIRM_BUTTONS:".growl .confirm a.button"},f={MODAL:"modal",VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},g=function(){c.removeClass(f.SHOW);setTimeout(function(){e.style("display","none").removeClass("url").removeClass("confirm")},300)},h=function(a,b){e.style("display")==="none"&&e.show();
a&&e.addClass(f.MODAL)||e.removeClass(f.MODAL);c.removeClass(f.SHOW).removeClass(f.WORKING);c.removeClass("url").removeClass("notify").removeClass("confirm").removeClass("special");c.removeClass("error").removeClass("alert").removeClass("success");b&&c.addClass(f.WORKING)},i=function(a){c.html(a);setTimeout(function(){c.addClass(f.SHOW)},1)},r=function(a,b){a!==t&&a!==0&&setTimeout(function(){g();b&&setTimeout(b,300)},a*1E3)},m=function(a,b,j){return'<span class="icon '+j+'"></span><strong>'+a+"</strong><small>"+
b+"</small>"},s=function(a,b){return'<a href="#" data-callback="'+b+'" class="button '+a.color+'" data-icon="'+a.icon+'">'+a.label+"</a>"};d.dom(k.BODY).append('<div class="growl"><div class="window"></div></div>');e=d.dom(k.GROWL);c=e.children(".window");(function(){c.tap(function(){c.hasClass("notify")&&g()});d.dom(k.CONFIRM_BUTTONS).tap(function(){var a=d.dom(this);(a=q[a.data("callback")].callback)&&a.call(a);g()});d.dom(k.WINDOW_CLOSABLE).tap(g)})();return{show:function(a,b,j,n,o,p){h(true,n);
i(m(a,b,j));r(o,p)},notify:function(a,b,j,n,o,p){h(false);c.addClass(n||"info").addClass("special notify");i(m(a,b,j));r(o,p)},confirm:function(a){q=a;h(false);var b="<p>"+m(a.title,a.description,a.icon)+"</p><hr/>";b+=s(a.accept,"accept");b+=s(a.cancel,"cancel");c.addClass("special confirm");i(b)},html:function(a,b){h(true);c.addClass("url");a+=b?'<span class="icon close"></span>':"";i(a)},loading:function(){h(true);var a=d.Attributes.Data.Loading.html.replace(l.START+l.KEY+l.END,"icon loading white");
i(a)},hide:g}}(Lungo);
